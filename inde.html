<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0f0f0f;
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        nav {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
            border-bottom: 1px solid #333;
            padding-bottom: 20px;
            flex-wrap: wrap;
        }

        nav button {
            background: none;
            border: none;
            color: #888;
            cursor: pointer;
            font-size: 1em;
            padding: 10px 0;
            transition: color 0.2s;
        }

        nav button.active {
            color: #fff;
            border-bottom: 2px solid #fff;
        }

        nav button:hover {
            color: #aaa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .panel {
            display: none;
        }

        .panel.active {
            display: block;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .card {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.2s;
        }

        .card:hover {
            border-color: #555;
            background: #222;
        }

        .card-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            font-weight: 500;
        }

        input, textarea, select {
            width: 100%;
            background: #0f0f0f;
            border: 1px solid #333;
            color: #fff;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: inherit;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #555;
        }

        button {
            background: #fff;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            margin: 10px 5px 10px 0;
        }

        button:hover {
            background: #ddd;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .slider-container {
            margin: 20px 0;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        input[type="range"] {
            width: 100%;
            height: 4px;
            background: #333;
            outline: none;
            appearance: none;
            margin: 10px 0;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #fff;
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #fff;
            border: none;
            cursor: pointer;
        }

        .preview {
            width: 100%;
            height: 100px;
            background: #333;
            border-radius: 4px;
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
        }

        .note {
            background: #1a1a1a;
            border-left: 3px solid #fff;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .note:hover {
            background: #222;
            transform: translateX(5px);
        }

        .note-time {
            color: #666;
            font-size: 0.85em;
            margin-top: 8px;
        }

        .task {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #1a1a1a;
            margin: 8px 0;
            border-radius: 4px;
        }

        .task input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .task.done {
            opacity: 0.5;
        }

        .task.done .task-text {
            text-decoration: line-through;
        }

        .task-text {
            flex: 1;
        }

        .timer-display {
            font-size: 5em;
            text-align: center;
            margin: 30px 0;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            letter-spacing: 10px;
        }

        .calculator-input {
            font-size: 1.5em;
            text-align: right;
        }

        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .calc-buttons button {
            padding: 20px;
            font-size: 1.2em;
        }

        h2 {
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-box {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #aaa;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
            margin-top: 8px;
        }

        .particle {
            position: fixed;
            pointer-events: none;
            font-size: 3em;
            z-index: 999;
            line-height: 1;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            animation: float linear forwards;
        }

        @keyframes float {
            0% { 
                opacity: 1; 
                transform: translateY(0) translateX(0) rotate(0deg) scale(1); 
            }
            100% { 
                opacity: 0; 
                transform: translateY(-500px) translateX(100px) rotate(720deg) scale(0.3); 
            }
        }
    </style>
</head>
<body>
    <nav>
        <button class="nav-btn active" onclick="switchPanel('notes')">Notes</button>
        <button class="nav-btn" onclick="switchPanel('tasks')">Tasks</button>
        <button class="nav-btn" onclick="switchPanel('timer')">Timer</button>
        <button class="nav-btn" onclick="switchPanel('calc')">Calculator</button>
        <button class="nav-btn" onclick="switchPanel('tools')">Tools</button>
        <button class="nav-btn" onclick="switchPanel('games')">Games</button>
        <button class="nav-btn" onclick="switchPanel('art')">Art</button>
    </nav>

    <div class="container">
        <!-- NOTES PANEL -->
        <div id="notes" class="panel active">
            <h2>Notes</h2>
            <input type="text" id="noteTitle" placeholder="Note title...">
            <textarea id="noteText" placeholder="Write something..." rows="6"></textarea>
            <button onclick="addNote()">Save Note</button>
            <button onclick="clearAllNotes()">Clear All</button>
            <div id="notesList"></div>
        </div>

        <!-- TASKS PANEL -->
        <div id="tasks" class="panel">
            <h2>Tasks</h2>
            <input type="text" id="taskInput" placeholder="Add a new task..." onkeypress="if(event.key==='Enter') addTask()">
            <button onclick="addTask()">Add</button>
            <button onclick="clearCompletedTasks()">Clear Done</button>
            <button onclick="clearAllTasks()">Clear All</button>
            <div id="tasksList"></div>
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-number" id="totalTasks">0</div>
                    <div class="stat-label">Total</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="completedTasks">0</div>
                    <div class="stat-label">Done</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="remainingTasks">0</div>
                    <div class="stat-label">Remaining</div>
                </div>
            </div>
        </div>

        <!-- TIMER PANEL -->
        <div id="timer" class="panel">
            <h2>Timer</h2>
            <div class="grid">
                <div class="card">
                    <div class="card-title">Presets</div>
                    <div class="preset-buttons">
                        <button onclick="setTimer(1)">1m</button>
                        <button onclick="setTimer(5)">5m</button>
                        <button onclick="setTimer(10)">10m</button>
                        <button onclick="setTimer(30)">30m</button>
                        <button onclick="setTimer(60)">1h</button>
                    </div>
                </div>
                <div class="card">
                    <div class="card-title">Custom</div>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Minutes: <span id="minDisplay">5</span></span>
                        </div>
                        <input type="range" id="minSlider" min="0" max="120" value="5" onchange="updateTimerDisplay()">
                    </div>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Seconds: <span id="secDisplay">0</span></span>
                        </div>
                        <input type="range" id="secSlider" min="0" max="59" value="0" onchange="updateTimerDisplay()">
                    </div>
                </div>
            </div>
            <div class="timer-display" id="timerDisplay">05:00</div>
            <div style="text-align: center;">
                <button onclick="startTimer()">Start</button>
                <button onclick="pauseTimer()">Pause</button>
                <button onclick="resetTimer()">Reset</button>
            </div>
        </div>

        <!-- CALCULATOR PANEL -->
        <div id="calc" class="panel">
            <h2>Calculator</h2>
            <div class="card">
                <input type="text" class="calculator-input" id="calcDisplay" readonly value="0">
                <div class="calc-buttons">
                    <button onclick="calcClear()">C</button>
                    <button onclick="calcDelete()">‚Üê</button>
                    <button onclick="calcAppend('/')">√∑</button>
                    <button onclick="calcAppend('*')">√ó</button>
                    
                    <button onclick="calcAppend('7')">7</button>
                    <button onclick="calcAppend('8')">8</button>
                    <button onclick="calcAppend('9')">9</button>
                    <button onclick="calcAppend('-')">‚àí</button>
                    
                    <button onclick="calcAppend('4')">4</button>
                    <button onclick="calcAppend('5')">5</button>
                    <button onclick="calcAppend('6')">6</button>
                    <button onclick="calcAppend('+')">+</button>
                    
                    <button onclick="calcAppend('1')">1</button>
                    <button onclick="calcAppend('2')">2</button>
                    <button onclick="calcAppend('3')">3</button>
                    <button onclick="calcAppend('.')">.</button>
                    
                    <button onclick="calcAppend('0')" style="grid-column: span 2;">0</button>
                    <button onclick="calcEquals()" style="grid-column: span 2;">=</button>
                </div>
            </div>
        </div>

        <!-- TOOLS PANEL -->
        <div id="tools" class="panel">
            <h2>Tools</h2>
            <div class="grid">
                <div class="card">
                    <div class="card-title">Text Utils</div>
                    <textarea id="textInput" placeholder="Enter text..." rows="4"></textarea>
                    <button onclick="textToUpper()">UPPERCASE</button>
                    <button onclick="textToLower()">lowercase</button>
                    <button onclick="textReverse()">Reverse</button>
                    <button onclick="textCopy()">Copy</button>
                    <div id="textStats" style="margin-top: 15px; color: #666; font-size: 0.9em;"></div>
                </div>
                <div class="card">
                    <div class="card-title">Color Mixer</div>
                    <div class="slider-container">
                        <div class="slider-label">R: <span id="rVal">100</span></div>
                        <input type="range" id="rSlider" min="0" max="255" value="100" onchange="updateRGB()">
                    </div>
                    <div class="slider-container">
                        <div class="slider-label">G: <span id="gVal">150</span></div>
                        <input type="range" id="gSlider" min="0" max="255" value="150" onchange="updateRGB()">
                    </div>
                    <div class="slider-container">
                        <div class="slider-label">B: <span id="bVal">200</span></div>
                        <input type="range" id="bSlider" min="0" max="255" value="200" onchange="updateRGB()">
                    </div>
                    <div class="preview" id="colorPreview"></div>
                    <button onclick="randomRGB()">Random Color</button>
                    <button onclick="copyColor()">Copy RGB</button>
                </div>
                <div class="card">
                    <div class="card-title">Unit Converter</div>
                    <input type="number" id="convValue" placeholder="Value" value="1">
                    <select id="convFrom">
                        <option>km</option>
                        <option>m</option>
                        <option>cm</option>
                        <option>miles</option>
                        <option>feet</option>
                    </select>
                    <select id="convTo">
                        <option>m</option>
                        <option>km</option>
                        <option>cm</option>
                        <option>miles</option>
                        <option>feet</option>
                    </select>
                    <button onclick="convert()">Convert</button>
                    <div id="convResult" style="margin-top: 15px; color: #aaa;"></div>
                </div>
                <div class="card">
                    <div class="card-title">QR Code Generator</div>
                    <textarea id="qrText" placeholder="Text to encode..." rows="3"></textarea>
                    <button onclick="generateQR()">Generate QR Code</button>
                    <div id="qrResult" style="margin-top: 15px; text-align: center;"></div>
                </div>
            </div>
        </div>

        <!-- GAMES PANEL -->
        <div id="games" class="panel">
            <h2>Games & Fun</h2>
            <div class="grid">
                <div class="card">
                    <div class="card-title">Dice Roller</div>
                    <select id="diceType">
                        <option>d6</option>
                        <option>d20</option>
                        <option>d100</option>
                    </select>
                    <button onclick="rollDice()">Roll</button>
                    <div class="dice-result" id="diceResult">-</div>
                </div>
                <div class="card">
                    <div class="card-title">Coin Flip</div>
                    <button onclick="flipCoin()">Flip Coin</button>
                    <div class="dice-result" id="coinResult" style="font-size: 3em;">-</div>
                </div>
                <div class="card">
                    <div class="card-title">Random Number</div>
                    <input type="number" id="minRandom" placeholder="Min" value="1" style="margin: 5px 0;">
                    <input type="number" id="maxRandom" placeholder="Max" value="100" style="margin: 5px 0;">
                    <button onclick="randomNumber()">Generate</button>
                    <div class="dice-result" id="randomResult">-</div>
                </div>
                <div class="card">
                    <div class="card-title">Password Generator</div>
                    <div class="slider-container">
                        <div class="slider-label">Length: <span id="passLen">12</span></div>
                        <input type="range" id="passSlider" min="4" max="32" value="12" onchange="document.getElementById('passLen').textContent = this.value">
                    </div>
                    <button onclick="generatePassword()">Generate</button>
                    <input type="text" id="genPassword" readonly style="margin-top: 10px;">
                    <button onclick="copyPassword()">Copy</button>
                </div>
            </div>
        </div>

        <!-- ART PANEL -->
        <div id="art" class="panel">
            <h2>Art & Effects</h2>
            <div class="grid">
                <div class="card">
                    <div class="card-title">Emoji Burst</div>
                    <select id="emojiType">
                        <option>Party</option>
                        <option>Stars</option>
                        <option>Fire</option>
                        <option>Hearts</option>
                        <option>Random</option>
                    </select>
                    <button onclick="emojiSplash()">Burst!</button>
                </div>
                <div class="card">
                    <div class="card-title">Background Effects</div>
                    <div style="margin-bottom: 15px;">
                        <strong>Ambiance Presets:</strong>
                        <div style="display: flex; gap: 5px; flex-wrap: wrap; margin: 10px 0;">
                            <button onclick="setAmbiance('sunset')" style="padding: 5px 10px; font-size: 0.85em; margin: 0;">Sunset</button>
                            <button onclick="setAmbiance('ocean')" style="padding: 5px 10px; font-size: 0.85em; margin: 0;">Ocean</button>
                            <button onclick="setAmbiance('forest')" style="padding: 5px 10px; font-size: 0.85em; margin: 0;">Forest</button>
                            <button onclick="setAmbiance('night')" style="padding: 5px 10px; font-size: 0.85em; margin: 0;">Night</button>
                            <button onclick="setAmbiance('cyberpunk')" style="padding: 5px 10px; font-size: 0.85em; margin: 0;">Cyber</button>
                            <button onclick="setAmbiance('aurora')" style="padding: 5px 10px; font-size: 0.85em; margin: 0;">Aurora</button>
                        </div>
                    </div>
                    <div style="margin-top: 15px;">
                        <strong>Custom Gradient:</strong>
                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                            <div>
                                <label style="font-size: 0.9em; color: #666;">Color 1</label>
                                <input type="color" id="grad1" value="#667eea" onchange="updateCustomGradient()">
                            </div>
                            <div>
                                <label style="font-size: 0.9em; color: #666;">Color 2</label>
                                <input type="color" id="grad2" value="#764ba2" onchange="updateCustomGradient()">
                            </div>
                            <div>
                                <label style="font-size: 0.9em; color: #666;">Angle</label>
                                <input type="range" id="gradAngle" min="0" max="360" value="135" onchange="updateCustomGradient()" style="width: 80px;">
                            </div>
                        </div>
                    </div>
                    <div class="preview" id="gradientPreview" style="margin-top: 15px; background: linear-gradient(135deg, #667eea, #764ba2);"></div>
                </div>
                <div class="card">
                    <div class="card-title">Confetti Party</div>
                    <button onclick="confettiParty()">PARTY!</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let timerInterval = null;
        let timerSeconds = 0;
        let timerRunning = false;
        let calcDisplay = '0';

        // Navigation
        function switchPanel(panelName) {
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(panelName).classList.add('active');
            event.target.classList.add('active');
        }

        // NOTES
        function addNote() {
            const title = document.getElementById('noteTitle').value;
            const text = document.getElementById('noteText').value;
            if (!title && !text) return;

            const notes = JSON.parse(localStorage.getItem('notes') || '[]');
            notes.push({ title, text, time: new Date().toLocaleString() });
            localStorage.setItem('notes', JSON.stringify(notes));
            document.getElementById('noteTitle').value = '';
            document.getElementById('noteText').value = '';
            renderNotes();
            emojiSplash('Party');
        }

        function renderNotes() {
            const notes = JSON.parse(localStorage.getItem('notes') || '[]');
            const list = document.getElementById('notesList');
            list.innerHTML = notes.map((n, i) => `
                <div class="note" onclick="deleteNote(${i})">
                    <strong>${n.title || '(untitled)'}</strong>
                    <div>${n.text.substring(0, 100)}${n.text.length > 100 ? '...' : ''}</div>
                    <div class="note-time">${n.time}</div>
                </div>
            `).join('');
        }

        function deleteNote(i) {
            const notes = JSON.parse(localStorage.getItem('notes') || '[]');
            notes.splice(i, 1);
            localStorage.setItem('notes', JSON.stringify(notes));
            renderNotes();
        }

        function clearAllNotes() {
            if(confirm('Clear all notes?')) {
                localStorage.setItem('notes', '[]');
                renderNotes();
            }
        }

        // TASKS
        function addTask() {
            const input = document.getElementById('taskInput');
            if (!input.value) return;
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            tasks.push({ text: input.value, done: false });
            localStorage.setItem('tasks', JSON.stringify(tasks));
            input.value = '';
            renderTasks();
        }

        function toggleTask(i) {
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            tasks[i].done = !tasks[i].done;
            localStorage.setItem('tasks', JSON.stringify(tasks));
            renderTasks();
        }

        function deleteTask(i) {
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            tasks.splice(i, 1);
            localStorage.setItem('tasks', JSON.stringify(tasks));
            renderTasks();
        }

        function clearCompletedTasks() {
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            const filtered = tasks.filter(t => !t.done);
            localStorage.setItem('tasks', JSON.stringify(filtered));
            renderTasks();
        }

        function clearAllTasks() {
            if(confirm('Clear all tasks?')) {
                localStorage.setItem('tasks', '[]');
                renderTasks();
            }
        }

        function renderTasks() {
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            const list = document.getElementById('tasksList');
            list.innerHTML = tasks.map((t, i) => `
                <div class="task ${t.done ? 'done' : ''}">
                    <input type="checkbox" ${t.done ? 'checked' : ''} onchange="toggleTask(${i})">
                    <div class="task-text">${t.text}</div>
                    <button onclick="deleteTask(${i})" style="margin: 0; padding: 5px 10px; font-size: 0.85em;">Delete</button>
                </div>
            `).join('');
            const completed = tasks.filter(t => t.done).length;
            const total = tasks.length;
            document.getElementById('totalTasks').textContent = total;
            document.getElementById('completedTasks').textContent = completed;
            document.getElementById('remainingTasks').textContent = total - completed;
        }

        // TIMER
        function setTimer(minutes) {
            document.getElementById('minSlider').value = minutes;
            document.getElementById('secSlider').value = 0;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const min = document.getElementById('minSlider').value;
            const sec = document.getElementById('secSlider').value;
            document.getElementById('minDisplay').textContent = min;
            document.getElementById('secDisplay').textContent = String(sec).padStart(2, '0');
            document.getElementById('timerDisplay').textContent = `${String(min).padStart(2, '0')}:${String(sec).padStart(2, '0')}`;
        }

        function startTimer() {
            if (timerRunning) return;
            const min = parseInt(document.getElementById('minSlider').value);
            const sec = parseInt(document.getElementById('secSlider').value);
            timerSeconds = min * 60 + sec;
            if (timerSeconds <= 0) return;

            timerRunning = true;
            document.getElementById('minSlider').disabled = true;
            document.getElementById('secSlider').disabled = true;

            timerInterval = setInterval(() => {
                timerSeconds--;
                const m = Math.floor(timerSeconds / 60);
                const s = timerSeconds % 60;
                document.getElementById('timerDisplay').textContent = `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
                if (timerSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerRunning = false;
                    document.getElementById('minSlider').disabled = false;
                    document.getElementById('secSlider').disabled = false;
                    confettiParty();
                }
            }, 1000);
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            timerRunning = false;
        }

        function resetTimer() {
            clearInterval(timerInterval);
            timerRunning = false;
            document.getElementById('minSlider').disabled = false;
            document.getElementById('secSlider').disabled = false;
            updateTimerDisplay();
        }

        // CALCULATOR
        function calcAppend(v) {
            if (calcDisplay === '0' && v !== '.') calcDisplay = v;
            else calcDisplay += v;
            document.getElementById('calcDisplay').value = calcDisplay;
        }

        function calcClear() {
            calcDisplay = '0';
            document.getElementById('calcDisplay').value = calcDisplay;
        }

        function calcDelete() {
            calcDisplay = calcDisplay.slice(0, -1) || '0';
            document.getElementById('calcDisplay').value = calcDisplay;
        }

        function calcEquals() {
            try {
                calcDisplay = String(eval(calcDisplay));
                document.getElementById('calcDisplay').value = calcDisplay;
            } catch (e) {
                calcDisplay = '0';
                document.getElementById('calcDisplay').value = 'Error';
            }
        }

        // TOOLS - Text
        function textToUpper() {
            document.getElementById('textInput').value = document.getElementById('textInput').value.toUpperCase();
            updateTextStats();
        }

        function textToLower() {
            document.getElementById('textInput').value = document.getElementById('textInput').value.toLowerCase();
            updateTextStats();
        }

        function textReverse() {
            document.getElementById('textInput').value = document.getElementById('textInput').value.split('').reverse().join('');
            updateTextStats();
        }

        function textCopy() {
            const text = document.getElementById('textInput').value;
            navigator.clipboard.writeText(text);
        }

        function updateTextStats() {
            const text = document.getElementById('textInput').value;
            const chars = text.length;
            const words = text.split(/\s+/).filter(w => w).length;
            document.getElementById('textStats').innerHTML = `<strong>Chars:</strong> ${chars} | <strong>Words:</strong> ${words}`;
        }

        document.getElementById('textInput').addEventListener('input', updateTextStats);

        // TOOLS - Color
        function updateRGB() {
            const r = document.getElementById('rSlider').value;
            const g = document.getElementById('gSlider').value;
            const b = document.getElementById('bSlider').value;
            document.getElementById('rVal').textContent = r;
            document.getElementById('gVal').textContent = g;
            document.getElementById('bVal').textContent = b;
            const color = `rgb(${r}, ${g}, ${b})`;
            document.getElementById('colorPreview').style.backgroundColor = color;
        }

        function randomRGB() {
            const r = Math.floor(Math.random() * 256);
            const g = Math.floor(Math.random() * 256);
            const b = Math.floor(Math.random() * 256);
            document.getElementById('rSlider').value = r;
            document.getElementById('gSlider').value = g;
            document.getElementById('bSlider').value = b;
            updateRGB();
            confettiParty();
        }

        function copyColor() {
            const r = document.getElementById('rVal').textContent;
            const g = document.getElementById('gVal').textContent;
            const b = document.getElementById('bVal').textContent;
            navigator.clipboard.writeText(`rgb(${r}, ${g}, ${b})`);
        }

        // CONVERTER
        function convert() {
            const conversions = {
                'km': 1000, 'm': 1, 'cm': 0.01, 'miles': 1609.34, 'feet': 0.3048
            };
            const val = parseFloat(document.getElementById('convValue').value);
            const from = document.getElementById('convFrom').value;
            const to = document.getElementById('convTo').value;
            const result = (val * conversions[from]) / conversions[to];
            document.getElementById('convResult').innerHTML = `<strong>${val} ${from} = ${result.toFixed(2)} ${to}</strong>`;
        }

        // QR Code
        function generateQR() {
            const text = document.getElementById('qrText').value;
            if (!text) return;
            const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(text)}`;
            document.getElementById('qrResult').innerHTML = `<img src="${qrUrl}" alt="QR Code">`;
        }

        // GAMES
        function rollDice() {
            const type = document.getElementById('diceType').value;
            const max = parseInt(type.replace('d', ''));
            const result = Math.floor(Math.random() * max) + 1;
            document.getElementById('diceResult').textContent = result;
            emojiSplash('Stars');
        }

        function flipCoin() {
            const result = Math.random() > 0.5 ? 'Heads' : 'Tails';
            document.getElementById('coinResult').textContent = result === 'Heads' ? 'ü™ô' : 'üîÑ';
        }

        function randomNumber() {
            const min = parseInt(document.getElementById('minRandom').value);
            const max = parseInt(document.getElementById('maxRandom').value);
            const result = Math.floor(Math.random() * (max - min + 1)) + min;
            document.getElementById('randomResult').textContent = result;
        }

        function generatePassword() {
            const len = parseInt(document.getElementById('passSlider').value);
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*';
            let pass = '';
            for (let i = 0; i < len; i++) pass += chars.charAt(Math.floor(Math.random() * chars.length));
            document.getElementById('genPassword').value = pass;
        }

        function copyPassword() {
            const pass = document.getElementById('genPassword').value;
            navigator.clipboard.writeText(pass);
        }

        // ART & EFFECTS
        function emojiSplash(type = null) {
            const emojiTypes = {
                'Party': ['üéâ', 'üéä', 'üéà', 'üéÅ'],
                'Stars': ['‚≠ê', '‚ú®', 'üí´', 'üåü'],
                'Fire': ['üî•', 'üí•', '‚ö°', 'üåü'],
                'Hearts': ['‚ù§Ô∏è', 'üíñ', 'üíù', 'üíï'],
                'Random': ['üéâ', 'üî•', '‚≠ê', '‚ù§Ô∏è', '‚ú®', 'üöÄ', 'üíé', 'üéä']
            };

            const selected = type ? emojiTypes[type] : emojiTypes[document.getElementById('emojiType').value];
            if (!selected) return;

            for (let i = 0; i < 80; i++) {
                setTimeout(() => {
                    const emoji = selected[Math.floor(Math.random() * selected.length)];
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.textContent = emoji;
                    particle.style.left = Math.random() * window.innerWidth + 'px';
                    particle.style.top = window.innerHeight + 'px';
                    particle.style.animationDuration = (2000 + Math.random() * 2000) + 'ms';
                    document.body.appendChild(particle);

                    setTimeout(() => {
                        if (particle.parentNode) particle.remove();
                    }, 4000);
                }, i * 30);
            }
        }

        function confettiParty() {
            for (let i = 0; i < 200; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.textContent = ['üéâ', 'üéä', 'üéà', 'üéÅ', '‚ú®', 'üåü'][Math.floor(Math.random() * 6)];
                    particle.style.left = Math.random() * window.innerWidth + 'px';
                    particle.style.top = window.innerHeight / 2 + 'px';
                    const duration = 3000 + Math.random() * 2000;
                    particle.style.animationDuration = duration + 'ms';
                    document.body.appendChild(particle);

                    setTimeout(() => {
                        if (particle.parentNode) particle.remove();
                    }, duration + 100);
                }, i * 20);
            }
        }

        function changeBackground(type) {
            const backgrounds = {
                'gradient1': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'gradient2': 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                'gradient3': 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                'dark': '#0f0f0f'
            };
            document.body.style.background = backgrounds[type];
            confettiParty();
        }

        function setAmbiance(type) {
            const ambiances = {
                'sunset': 'linear-gradient(135deg, #FF6B6B 0%, #FFA500 25%, #FF69B4 50%, #8B4789 75%, #2C1B47 100%)',
                'ocean': 'linear-gradient(135deg, #1E90FF 0%, #00CED1 25%, #20B2AA 50%, #008B8B 75%, #000033 100%)',
                'forest': 'linear-gradient(135deg, #228B22 0%, #32CD32 25%, #90EE90 50%, #556B2F 75%, #1C1C1C 100%)',
                'night': 'linear-gradient(135deg, #0A0A1A 0%, #1A0033 25%, #2D0A3D 50%, #1A0A2E 75%, #050005 100%)',
                'cyberpunk': 'linear-gradient(135deg, #FF006E 0%, #00F5FF 25%, #FFBE0B 50%, #FB5607 75%, #3A0CA3 100%)',
                'aurora': 'linear-gradient(135deg, #00FF41 0%, #00D9FF 25%, #FF00FF 50%, #FFFF00 75%, #1A1A2E 100%)'
            };
            document.body.style.background = ambiances[type];
        }

        function updateCustomGradient() {
            const color1 = document.getElementById('grad1').value;
            const color2 = document.getElementById('grad2').value;
            const angle = document.getElementById('gradAngle').value;
            const gradient = `linear-gradient(${angle}deg, ${color1}, ${color2})`;
            document.body.style.background = gradient;
            document.getElementById('gradientPreview').style.background = gradient;
        }

        // Init
        renderNotes();
        renderTasks();
        updateTimerDisplay();
        updateRGB();
    </script>
</body>
</html>
